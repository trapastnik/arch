<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
  <title>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–ª–∞–Ω—à–µ—Ç–æ–≤</title>
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
  <link rel="preload" href="web_model/model.onnx" as="fetch" crossorigin>
  <style>
    :root{color-scheme:dark}*{box-sizing:border-box}html,body{height:100%}
    body{margin:0;background:#0f1115;color:#e6e6e6;font:15px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;
         padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}
    .wrap{max-width:720px;margin:0 auto;padding:10px 12px}
    h1{font-size:17px;margin:0 0 8px}
    .card{background:#171a21;border:1px solid #262a33;border-radius:12px;padding:10px}
    .video-wrap{position:relative;border-radius:10px;overflow:hidden;background:#000}
    video{display:block;width:100%;max-height:50vh;background:#000}
    canvas#overlay{position:absolute;inset:0;width:100%;height:100%;pointer-events:none}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 6px;align-items:center}
    button{padding:8px 12px;border-radius:9px;border:1px solid #2b3140;background:#222a36;color:#fff;cursor:pointer;font-size:14px}
    button[disabled]{opacity:.6;cursor:not-allowed}
    label.switch{font-size:13px;display:flex;align-items:center;gap:6px;opacity:.9}
    #result{font-size:16px;margin:6px 0 2px}#sub{opacity:.8;font-size:13px;min-height:18px;margin-bottom:4px}
    #progressWrap{display:none;height:6px;background:#11151c;border:1px solid #283041;border-radius:999px;overflow:hidden;margin:4px 0 6px}
    #progress{height:100%;width:0%;background:#4a90e2}
    .topk{display:flex;gap:6px;overflow-x:auto}.pill{border:1px solid #2b3140;border-radius:999px;padding:3px 8px;font-size:12px;white-space:nowrap}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üì∑ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–ª–∞–Ω—à–µ—Ç–æ–≤</h1>
    <div class="card">
      <div class="video-wrap">
        <video id="video" playsinline muted></video>
        <canvas id="overlay"></canvas>
      </div>
      <div class="controls">
        <button id="btnStart">–°—Ç–∞—Ä—Ç –∫–∞–º–µ—Ä—ã</button>
        <button id="btnStop" disabled>–°—Ç–æ–ø</button>
        <button id="btnFlip">–ü–æ–º–µ–Ω—è—Ç—å –∫–∞–º–µ—Ä—É</button>
        <label class="switch"><input id="chkAutoBox" type="checkbox" checked> –ê–≤—Ç–æ-—Ä–∞–º–∫–∞</label>
      </div>
      <div id="result">–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É‚Ä¶</div>
      <div id="sub">–ó–∞–≥—Ä—É–∑–∏—Ç—Å—è –º–æ–¥–µ–ª—å –∏ –∫–∞—Ä—Ç–∞ –∫–ª–∞—Å—Å–æ–≤.</div>
      <div id="progressWrap"><div id="progress"></div></div>
      <div class="topk" id="topk"></div>
      <details style="margin-top:6px"><summary>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</summary><pre id="diag" style="white-space:pre-wrap;background:#11151c;border:1px solid #283041;padding:8px;border-radius:8px;font-size:12px;max-height:22vh;overflow:auto"></pre></details>
    </div>
  </div>
  <script type="module" src="app/main.js"></script>
</body>
</html>
